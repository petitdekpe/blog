{% extends 'base.html.twig' %}

{% block title %}MD - Actualités
{% endblock %}

{% block body %}
	<div class="home-page">
		{% if featuredArticle %}
			<div role="listitem" class="w-dyn-item">
				<a href="{{ path('app_article', {slug: featuredArticle.slug}) }}" class="hero-article-collection-item w-inline-block">
					{% if featuredArticle.image %}
						<img src="{{ asset('uploads/images/' ~ featuredArticle.image) }}" loading="lazy" alt="{{ featuredArticle.title }}" class="hero-article-thumbnail">
					{% endif %}
					<div class="hero-article-body">
						{% if featuredArticle.tag %}
							<div class="article-chip chip-background">
								<div>{{ featuredArticle.tag }}</div>
							</div>
							<div class="spacer-small"></div>
						{% endif %}
						<h1 class="hero-article-heading">{{ featuredArticle.title }}</h1>
						<div class="hero-article-cta">
							<div>Accéder à l'article</div>
						</div>
					</div>
				</a>
			</div>
		{% endif %}

		<section class="articles-section">
			<div class="section-header">
				<h2 class="section-title">Les articles de la rédaction</h2>
				<a href="{{ path('app_articles') }}" class="section-link">Tout voir</a>
			</div>
			<div class="articles-grid">
				{% for article in recentArticles %}
					<article class="article-card">
						<a href="{{ path('app_article', {slug: article.slug}) }}" class="article-link">
							{% if article.image %}
								<div class="article-image">
									<img src="{{ asset('uploads/images/' ~ article.image) }}" alt="{{ article.title }}">
									{% if article.tag %}
										<span class="article-badge">{{ article.tag }}</span>
									{% endif %}
								</div>
							{% endif %}
							<div class="article-content">
								<h3 class="article-title">{{ article.title }}</h3>
							</div>
						</a>
					</article>
				{% endfor %}
			</div>
		</section>

		<section class="podcasts-section">
			<div class="section-header">
				<h2 class="section-title">Episodes de podcast</h2>
				<a href="{{ path('app_podcast') }}" class="section-link">Tout voir</a>
			</div>
			<div class="podcast-grid-home">
				{% for episode in recentPodcasts %}
					<div class="podcast-episode">
						<iframe data-testid="embed-iframe" style="border-radius:12px" src="{{ episode.embedUrl }}" width="100%" height="117" frameborder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
					</div>
				{% endfor %}
			</div>
		</section>
	</div>
{% endblock %}
